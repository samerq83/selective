# دليل نشر تطبيق Selective Trading

هذا الدليل يشرح كيفية نشر تطبيق Selective Trading على Vercel وربطه بقاعدة بيانات MongoDB Atlas ودومين مخصص.

## 1. قاعدة البيانات MongoDB Atlas

تم إعداد قاعدة البيانات MongoDB Atlas بنجاح. معلومات الاتصال:

```
mongodb+srv://mr000000_db_user:zohwlq0wOWpwihaK@cluster0.wv2o5h4.mongodb.net/selective-trading?retryWrites=true&w=majority&appName=Cluster0
```

### اختبار الاتصال بقاعدة البيانات

يمكنك اختبار الاتصال بقاعدة البيانات باستخدام الأمر:

```bash
npm run test-connection
```

### تهيئة قاعدة البيانات

تم تهيئة قاعدة البيانات بالبيانات الأولية التالية:
- حساب المسؤول الرئيسي (رقم الهاتف: +966501234567، كلمة المرور: admin123)
- 5 منتجات افتراضية
- إعدادات النظام الأساسية

يمكنك إعادة تهيئة قاعدة البيانات في أي وقت باستخدام الأمر:

```bash
npm run seed
```

## 2. نشر التطبيق على Vercel

### الخطوات:

1. **إنشاء حساب على Vercel**: قم بزيارة [vercel.com](https://vercel.com) وسجل باستخدام حساب GitHub الخاص بك.

2. **استيراد المشروع**:
   - انقر على "Add New" ثم "Project"
   - اختر مستودع GitHub الخاص بمشروعك
   - اترك الإعدادات الافتراضية واضغط "Deploy"

3. **متغيرات البيئة**:
   تم تكوين متغيرات البيئة في ملف `vercel.json` وتشمل:
   - `MONGODB_URI`: رابط الاتصال بقاعدة البيانات
   - `JWT_SECRET`: مفتاح تشفير JWT
   - `NEXTAUTH_SECRET`: مفتاح تشفير NextAuth
   - `COOKIE_SECRET`: مفتاح تشفير الكوكيز
   - `ADMIN_PHONE`: رقم هاتف المسؤول الرئيسي

## 3. ربط دومين مخصص

### الخطوات:

1. **شراء دومين**: يمكنك شراء دومين من أي مزود مثل Namecheap أو GoDaddy أو Google Domains.

2. **ربط الدومين بـ Vercel**:
   - في لوحة تحكم Vercel، انتقل إلى "Settings" ثم "Domains"
   - أضف الدومين الخاص بك (مثل selective-trading.com)
   - اتبع التعليمات لإعداد سجلات DNS:
     - أضف سجل A يشير إلى عنوان IP الخاص بـ Vercel
     - أضف سجلات CNAME للـ www والنطاقات الفرعية الأخرى

3. **تحديث متغيرات البيئة**:
   بعد ربط الدومين، قم بتحديث المتغيرات التالية في لوحة تحكم Vercel:
   - `NEXT_PUBLIC_BASE_URL`: https://your-domain.com
   - `NEXTAUTH_URL`: https://your-domain.com

## 4. بعد النشر

### تسجيل الدخول كمسؤول:

- استخدم رقم الهاتف: +966501234567
- كلمة المرور: admin123

### تغيير كلمة المرور:

بعد تسجيل الدخول لأول مرة، يُنصح بتغيير كلمة المرور من خلال صفحة الملف الشخصي.

### إعدادات البريد الإلكتروني:

لتفعيل إرسال البريد الإلكتروني، قم بتحديث متغيرات البيئة التالية في لوحة تحكم Vercel:
- `SMTP_HOST`
- `SMTP_PORT`
- `SMTP_USER`
- `SMTP_PASS`
- `EMAIL_FROM`

## 5. الصيانة والتحديث

### تحديث المشروع:

```bash
# سحب التغييرات الجديدة
git pull

# تثبيت التبعيات الجديدة
npm install

# بناء المشروع
npm run build

# تشغيل المشروع
npm start
```

### النسخ الاحتياطي لقاعدة البيانات:

يمكنك عمل نسخة احتياطية من قاعدة البيانات من خلال لوحة تحكم MongoDB Atlas.

## 6. استكشاف الأخطاء وإصلاحها

### مشاكل الاتصال بقاعدة البيانات:

- تأكد من صحة رابط الاتصال في متغيرات البيئة
- تأكد من إضافة عنوان IP الخاص بـ Vercel في قائمة السماح في MongoDB Atlas

### مشاكل تسجيل الدخول:

- تأكد من صحة مفاتيح JWT و NextAuth في متغيرات البيئة
- تأكد من وجود حساب المسؤول في قاعدة البيانات

### مشاكل أخرى:

- راجع سجلات الخطأ في لوحة تحكم Vercel
- تأكد من تثبيت جميع التبعيات بشكل صحيح