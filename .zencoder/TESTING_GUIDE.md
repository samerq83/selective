# ๐งช ุฏููู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู

## ๐ ููุฑุณ ุงูุงุฎุชุจุงุฑุงุช

1. [ุงูุงุฎุชุจุงุฑ ุงููุญูู](#ุงุฎุชุจุงุฑ-ูุญูู)
2. [ุงุฎุชุจุงุฑ ุงููุชุตูุญ](#ุงุฎุชุจุงุฑ-ุงููุชุตูุญ)
3. [ุงุฎุชุจุงุฑ API](#ุงุฎุชุจุงุฑ-api)
4. [ุงุฎุชุจุงุฑ MongoDB](#ุงุฎุชุจุงุฑ-mongodb)
5. [ุงุฎุชุจุงุฑ Netlify](#ุงุฎุชุจุงุฑ-netlify)

---

## ๐ ุงุฎุชุจุงุฑ ูุญูู

### ุงููุชุทูุจุงุช
- [ ] Node.js ูุซุจุช
- [ ] MongoDB ูุชุตู (ูุญูู ุฃู ุจุนูุฏ)
- [ ] `.env.local` ููุนุฏู ูุน MONGODB_URI ุตุญูุญ

### ุงูุฎุทูุงุช

#### 1. ุชุดุบูู ุงูุณูุฑูุฑ
```bash
cd "c:\Users\Asus\Desktop\selective-trading-essential-backup - Copy"
npm run dev
```

**ุงูุชุญูู:** ูุฌุจ ุฃู ุชุฑู:
```
> selective-trading@1.0.0 dev
> next dev

โฒ Next.js 14.2.33
  - Local:        http://localhost:3000
  - Environments: .env.local
```

#### 2. ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก TypeScript
```bash
npx tsc --noEmit --skipLibCheck
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ูุง ุชูุฌุฏ ุฃุฎุทุงุก ุฌุฏูุฏุฉ ูู ุงูุชุนุฏููุงุช

---

## ๐ ุงุฎุชุจุงุฑ ุงููุชุตูุญ

### ุงูุฏุฎูู ูุงููุตุงุฏูุฉ

1. ุงูุชุญ `http://localhost:3000`
2. ุงุฎุชุฑ "ุฏุฎูู" (Login)
3. ุฃุฏุฎู ุฑูู ุงููุงุชู ูุฃููู ุงููุตุงุฏูุฉ

**ููุงุญุธุฉ:** ุฅุฐุง ูู ุชูู ูุฏูู ุญุณุงุจ:
- ุงุถุบุท "ุฅูุดุงุก ุญุณุงุจ" (Sign Up)
- ุฃููู ุงูุจูุงูุงุช

### ุงุฎุชุจุงุฑ ุฑูุน ุงูููู

#### ุงูุทุฑููุฉ 1: ูู ุตูุญุฉ "ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ"

1. ุงุฏุฎู Dashboard
2. ุงุถุบุท "ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ" (New Order)
3. ุงุฎุชุฑ 2-3 ููุชุฌุงุช
4. ุงูุชุจ ุฑุณุงูุฉ (ุงุฎุชูุงุฑู)
5. **ุงุฎุชุฑ ููู PDF** ๐ ุงูููู
6. ุงุถุบุท "ุญูุธ" (Save)

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุธููุฑ ุฑุณุงูุฉ ูุฌุงุญ
- โ ุงูุทูุจ ูุธูุฑ ูู ุงููุงุฆูุฉ
- โ ุจุฏูู ุฃุฎุทุงุก

#### ุงูุทุฑููุฉ 2: ูู ุตูุญุฉ "ุทูุจู" (My Orders)

1. ุงุฏุฎู ุฃุญุฏ ุงูุทูุจุงุช ุงููุญููุธุฉ
2. ุฅุฐุง ูุงู ููุฌุฏ ููู:
   - ูุฌุจ ุฃู ุชุฑู ุฒุฑ ุชุญููู
   - ุงุถุบุท ูุญููู ุงูููู
   - ุชุญูู ูู ุฃู ุงูููู ุตุญูุญ

---

## ๐ ุงุฎุชุจุงุฑ API

### ุงุณุชุฎุฏุงู Postman

#### ุงุฎุชุจุงุฑ ุฑูุน ุงูุทูุจ ูุน ุงูููู

**Request:**
```
Method: POST
URL: http://localhost:3000/api/orders
Headers:
  - Authorization: Bearer <YOUR_JWT_TOKEN>
  - Cookie: authToken=<YOUR_JWT_TOKEN>

Body (FormData):
  - items: [{"product":"PRODUCT_ID","quantity":2,"selectedUnitType":"piece"}]
  - message: "test order"
  - purchaseOrderFile: <SELECT PDF FILE>
```

**Response ูุชููุน (201):**
```json
{
  "order": {
    "_id": "...",
    "orderNumber": "ST241101-0001",
    "purchaseOrderFile": {
      "filename": "test.pdf",
      "contentType": "application/pdf",
      "data": "JVBERi0xLjQK...", // Base64 data
      "uploadedAt": "2024-11-01T10:00:00Z"
    },
    ...
  }
}
```

#### ุงุฎุชุจุงุฑ ุชุญููู ุงูููู

**Request:**
```
Method: GET
URL: http://localhost:3000/api/orders/download-file?orderId=<ORDER_ID>
Headers:
  - Authorization: Bearer <YOUR_JWT_TOKEN>
  - Cookie: authToken=<YOUR_JWT_TOKEN>
```

**Response ูุชููุน (200):**
- Binary PDF file
- Headers:
  - `Content-Type: application/pdf`
  - `Content-Disposition: attachment; filename="test.pdf"`

---

## ๐๏ธ ุงุฎุชุจุงุฑ MongoDB

### ุงุณุชุฎุฏุงู MongoDB Compass ุฃู mongosh

#### ุงูุงุชุตุงู
```bash
mongosh "mongodb+srv://<USER>:<PASS>@<CLUSTER>/<DB>"
```

#### ุงูุจุญุซ ุนู ุงูุทูุจ ุจุงูููู
```javascript
// ุงุฎุชุจุฑ MongoDB
db.orders.findOne({ "purchaseOrderFile.data": { $exists: true } })
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```json
{
  "_id": ObjectId("..."),
  "orderNumber": "ST241101-0001",
  "purchaseOrderFile": {
    "filename": "test.pdf",
    "contentType": "application/pdf",
    "data": "JVBERi0xLjQK...", // Base64 string ุทููู
    "uploadedAt": ISODate("2024-11-01T10:00:00Z")
  },
  ...
}
```

#### ุงูุชุญูู ูู ุญุฌู ุงูุจูุงูุงุช
```javascript
// Check file size
let order = db.orders.findOne({ "purchaseOrderFile.data": { $exists: true } });
print("Base64 size: " + order.purchaseOrderFile.data.length);
// ุชูุฑูุจุงู: ุญุฌู ุงูููู ุงูุฃุตูู ร 1.33
```

#### ุงูุชุญูู ูู ุฃู path ุงุฎุชูุงุฑู
```javascript
// ุงูุจูุงูุงุช ุงููุฏููุฉ ูุฏ ูุง ุชุญุชูู ุนูู data
db.orders.findOne({ "purchaseOrderFile.path": { $exists: true }, "purchaseOrderFile.data": { $exists: false } })
// ูุฏ ุชููู ูุชูุฌุฉ ูุงุฑุบุฉ (ูุง ุชูุฌุฏ ุจูุงูุงุช ูุฏููุฉ)
```

---

## ๐ ุงุฎุชุจุงุฑ Netlify

### ุงููุชุทูุจุงุช
- [ ] ูุณุฎ ุงูุชุบููุฑุงุช ุชู ุฑูุนูุง ุฅูู GitHub
- [ ] Netlify ูุฑุงูุจ ุงููุฑุน ุงูุฑุฆูุณู
- [ ] ุงูุฎุงุฏู ูุนูุฏ ุงูุจูุงุก ุชููุงุฆูุงู

### ุงูุฎุทูุงุช

#### 1. ุงูุงูุชุธุงุฑ ููุจูุงุก
- ุงุฏุฎู https://app.netlify.com
- ุงุฎุชุฑ ูููุนู "selective-trading"
- ุงูุชุธุฑ ุงูุชูุงู ุงูุจูุงุก
- ุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก

#### 2. ุงุฎุชุจุงุฑ ุงููููุน ุงูููุดูุฑ
- ุงูุชุญ https://selectiveco.netlify.app
- ุงุฏุฎู ุจุญุณุงุจู
- ุงุชุจุน ููุณ ุฎุทูุงุช [ุงุฎุชุจุงุฑ ุงููุชุตูุญ](#ุงุฎุชุจุงุฑ-ุงููุชุตูุญ)

#### 3. ุงุฎุชุจุงุฑ ุงููููุงุช
1. **ุฑูุน ููู ุฌุฏูุฏ:**
   - ุงูุชูู ุฅูู "ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ"
   - ุฑูุน ููู
   - ุงุถุบุท ุญูุธ

2. **ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก:**
   - ุงูุชุญ Developer Console (F12)
   - ุงูุธุฑ ุฅูู Network tab
   - ุชุญูู ูู ุฃู POST `/api/orders` ููุฌุญ (200 ุฃู 201)
   - ุชุญูู ูู ุนุฏู ูุฌูุฏ `ERR_CONNECTION_CLOSED`

3. **ุชุญููู ุงูููู:**
   - ุงุฏุฎู ุงูุทูุจ ุงููุญููุธ
   - ุงุถุบุท ุนูู ุฑุงุจุท ุงูุชุญููู (ุฅู ูุฌุฏ)
   - ุชุญูู ูู ุชุญููู ุงูููู ุงูุตุญูุญ

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

### ูุจู ุงูุฅุทูุงู

- [ ] ุงูุงุฎุชุจุงุฑ ุงููุญูู โ
  - [ ] ุฑูุน ุงูููู ูุนูู
  - [ ] ุงูููู ูุธูุฑ ูู MongoDB
  - [ ] ุชุญููู ุงูููู ูุนูู

- [ ] ุงุฎุชุจุงุฑ API โ
  - [ ] POST /api/orders ูุฑุฌุน Base64
  - [ ] GET /api/orders/download-file ูุฑุฌุน ุงูููู ุงูุตุญูุญ

- [ ] ุงุฎุชุจุงุฑ MongoDB โ
  - [ ] ุงูุจูุงูุงุช ูุญููุธุฉ ุจุดูู ุตุญูุญ
  - [ ] ุงูุญููู ุงูุฌุฏูุฏุฉ ููุฌูุฏุฉ

- [ ] ุงุฎุชุจุงุฑ Netlify โ
  - [ ] ุงูุจูุงุก ูุฌุญ ุจุฏูู ุฃุฎุทุงุก
  - [ ] ุงููููุน ูุญููู ุจุฏูู ูุดุงูู
  - [ ] ุฑูุน ุงูููู ูุนูู
  - [ ] ุนุฏู ูุฌูุฏ ERR_CONNECTION_CLOSED

### ุจุนุฏ ุงูุฅุทูุงู

- [ ] ูุฑุงูุจุฉ ุณุฌู ุงูุฃุฎุทุงุก
- [ ] ุงูุชุญูู ูู ุฃุฏุงุก ุงููููุน
- [ ] ุฌูุน ููุงุญุธุงุช ุงููุณุชุฎุฏููู

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูููู ูู ูุชู ุฑูุนู

**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงููุชุตูุญ ูุฑุณู FormData
2. ุชุญูู ูู Authorization header
3. ุฃูุธุฑ ููุณุฌูุงุช: `console.log('[Orders API]')`

### ุงููุดููุฉ: ุชุญููู ุงูููู ูุฑุฌุน 404

**ุงูุญู:**
1. ุชุญูู ูู ุฃู orderId ุตุญูุญ
2. ุชุญูู ูู ุฃู ุงูููู ููุฌูุฏ: `db.orders.findById(...).purchaseOrderFile`
3. ุชุญูู ูู ุงูุตูุงุญูุงุช (Authorization)

### ุงููุดููุฉ: ERR_CONNECTION_CLOSED ุนูู Netlify

**ุงูุชุญูู:**
- ูุฐุง ูุนูู API endpoint ูุณูุท
- ุงูุธุฑ ูู Netlify logs
- ุชุญูู ูู ุฃู MongoDB_URI ุตุญูุญ ูู Netlify

### ุงููุดููุฉ: ุงูููู ุงูุชุญููู ูุงุฑุบ

**ุงูุญู:**
1. ุชุญูู ูู Base64 encoding
2. ุชุญูู ูู ุญุฌู ุงูููู
3. ุงุฎุชุจุฑ ูุญูููุง ุฃููุงู

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ุงููุชููุนุฉ

| ุงููููุงุณ | ุงููููุฉ |
|--------|--------|
| ุญุฌู Base64 | ุญุฌู ุงูููู ุงูุฃุตูู ร 1.33 |
| ููุช ุงูุฑูุน | < 2 ุซุงููุฉ |
| ููุช ุงูุชุญููู | < 1 ุซุงููุฉ |
| ุญุฏ ุฃูุตู ุขูู | 5 MB |

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 1 ููููุจุฑ 2024  
**ุงูุญุงูุฉ:** ุฌุงูุฒ ููุงุณุชุฎุฏุงู